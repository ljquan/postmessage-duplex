import{_ as n,c as a,a as t,o as e}from"./app-BZDL3wne.js";const p={};function i(l,s){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-postmessage-duplex" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆé€‰æ‹©-postmessage-duplex"><span>ä¸ºä»€ä¹ˆé€‰æ‹© postmessage-duplexï¼Ÿ</span></a></h2><table><thead><tr><th>ç‰¹æ€§</th><th>åŸç”Ÿ postMessage</th><th>postmessage-duplex</th></tr></thead><tbody><tr><td>è¯·æ±‚-å“åº”æ¨¡å¼</td><td>âŒ éœ€è¦æ‰‹åŠ¨å®ç°</td><td>âœ… å†…ç½®æ”¯æŒ</td></tr><tr><td>Promise æ”¯æŒ</td><td>âŒ å›è°ƒæ¨¡å¼</td><td>âœ… async/await</td></tr><tr><td>è¶…æ—¶å¤„ç†</td><td>âŒ éœ€è¦æ‰‹åŠ¨å®ç°</td><td>âœ… è‡ªåŠ¨è¶…æ—¶</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>âŒ éœ€è¦æ‰‹åŠ¨å®ç°</td><td>âœ… è‡ªåŠ¨é˜Ÿåˆ—</td></tr><tr><td>ç±»å‹å®‰å…¨</td><td>âŒ any ç±»å‹</td><td>âœ… å®Œæ•´ç±»å‹å®šä¹‰</td></tr><tr><td>Service Worker</td><td>âŒ API ä¸åŒ</td><td>âœ… ç»Ÿä¸€æ¥å£</td></tr></tbody></table><h2 id="å¿«é€Ÿä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿä½“éªŒ"><span>å¿«é€Ÿä½“éªŒ</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> postmessage-duplex</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> IframeChannel <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;postmessage-duplex&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// çˆ¶é¡µé¢</span></span>
<span class="line"><span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IframeChannel</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> channel<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;getData&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å­é¡µé¢</span></span>
<span class="line"><span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IframeChannel</span><span class="token punctuation">(</span><span class="token string">&#39;https://parent.com&#39;</span><span class="token punctuation">)</span></span>
<span class="line">channel<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;getData&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> id<span class="token operator">:</span> data<span class="token punctuation">.</span>id <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div style="text-align:center;margin-top:2rem;"><a href="/postmessage-duplex/guide/getting-started.html" style="display:inline-block;padding:0.8rem 1.6rem;background:#3eaf7c;color:white;border-radius:4px;text-decoration:none;margin-right:1rem;">å¼€å§‹ä½¿ç”¨</a><a href="https://github.com/ljquan/postmessage-duplex" style="display:inline-block;padding:0.8rem 1.6rem;background:#333;color:white;border-radius:4px;text-decoration:none;">GitHub</a></div>`,6)])])}const c=n(p,[["render",i]]),d=JSON.parse('{"path":"/","title":"","lang":"zh-CN","frontmatter":{"home":true,"heroImage":"/logo.svg","heroText":"postmessage-duplex","tagline":"è½»é‡çº§ã€ç±»å‹å®‰å…¨çš„ postMessage åŒå·¥é€šè®¯åº“","actions":[{"text":"å¿«é€Ÿå¼€å§‹ â†’","link":"/guide/getting-started.html","type":"primary"},{"text":"ğŸ® åœ¨çº¿ä½“éªŒ","link":"/playground/","type":"secondary"}],"features":[{"title":"ğŸ”„ åŒå·¥é€šè®¯","details":"å®Œæ•´çš„åŒå‘æ¶ˆæ¯ä¼ é€’ï¼Œæ”¯æŒè¯·æ±‚-å“åº”æ¨¡å¼ï¼Œè‡ªåŠ¨å¤„ç†æ¶ˆæ¯è·¯ç”±"},{"title":"ğŸ¯ ç±»å‹å®‰å…¨","details":"å®Œå…¨ä½¿ç”¨ TypeScript ç¼–å†™ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ³›å‹æ”¯æŒ"},{"title":"ğŸ“¦ è½»é‡é›¶ä¾èµ–","details":"gzip å‹ç¼©åçº¦ 8KBï¼Œé›¶è¿è¡Œæ—¶ä¾èµ–"},{"title":"â±ï¸ å†…ç½®è¶…æ—¶","details":"è‡ªåŠ¨å¤„ç†è¯·æ±‚è¶…æ—¶ï¼Œæ”¯æŒè‡ªå®šä¹‰è¶…æ—¶æ—¶é—´"},{"title":"ğŸ”Œ å¤šåœºæ™¯æ”¯æŒ","details":"ç»Ÿä¸€çš„ API æ”¯æŒ iframe å’Œ Service Worker é€šè®¯"},{"title":"ğŸ” è°ƒè¯•å‹å¥½","details":"å†…ç½®æ¶ˆæ¯è¿½è¸ªåŠŸèƒ½ï¼Œæ”¯æŒè‡ªå®šä¹‰æ—¥å¿—"}],"footer":"MIT Licensed | Copyright Â© 2026- liquidliang"},"git":{"updatedTime":1769419490000,"contributors":[{"name":"liquidliang","username":"liquidliang","email":"ljquan@qq.com","commits":2,"url":"https://github.com/liquidliang"}],"changelog":[{"hash":"20f9a03cf8dee9df34a1e82ca0f0f4eba97d2a60","time":1769419490000,"email":"ljquan@qq.com","author":"liquidliang","message":"chore: optimize bundle size and simplify code"},{"hash":"288e378422593e39667c397bec9bbbf25465b67a","time":1769418463000,"email":"ljquan@qq.com","author":"liquidliang","message":"init"}]},"filePathRelative":"README.md"}');export{c as comp,d as data};
